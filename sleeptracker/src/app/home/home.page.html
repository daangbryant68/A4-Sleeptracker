<ion-header>
    <ion-toolbar color="primary">
        <ion-title>SleepTracker</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Loading your sleep data...</p>
    </div>

    <!-- Main Content -->
    <div *ngIf="!isLoading">
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h1>Welcome to SleepTracker</h1>
            <p>Track your sleep patterns and quality</p>

            <div class="stats-card">
                <ion-grid>
                    <ion-row>
                        <ion-col size="6">
                            <div class="stat-item">
                                <h3>{{ totalSleepLogs }}</h3>
                                <p>Total Logs</p>
                            </div>
                        </ion-col>
                        <ion-col size="6">
                            <div class="stat-item">
                                <h3>{{ formatDuration(averageSleepHours) }}</h3>
                                <p>Avg. Sleep</p>
                            </div>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <ion-button expand="block" color="primary" routerLink="/log-sleep">
                <ion-icon slot="start" name="moon"></ion-icon>
                Log Overnight Sleep
            </ion-button>

            <ion-button expand="block" color="secondary" routerLink="/log-sleepiness">
                <ion-icon slot="start" name="speedometer"></ion-icon>
                Log Sleepiness
            </ion-button>

            <ion-button expand="block" color="tertiary" routerLink="/view-all-logs">
                <ion-icon slot="start" name="list"></ion-icon>
                View All Logs
            </ion-button>
        </div>

        <!-- Recent Sleep Logs -->
        <ion-card *ngIf="recentSleeps.length > 0">
            <ion-card-header>
                <ion-card-title>Recent Sleep</ion-card-title>
                <ion-card-subtitle>
                    Showing 3 most recent of {{ totalSleepLogs }} total logs
                </ion-card-subtitle>
            </ion-card-header>

            <ion-card-content>
                <ion-list>
                    <ion-item *ngFor="let sleep of recentSleeps">
                        <ion-icon slot="start" name="moon" color="primary"></ion-icon>
                        <ion-label>
                            <h2>{{ sleep.dateString() }}</h2>
                            <p>{{ sleep.getStartTimeString() }} - {{ sleep.getEndTimeString() }}</p>
                            <p><strong>{{ sleep.summaryString() }}</strong></p>
                        </ion-label>
                    </ion-item>
                </ion-list>
            </ion-card-content>
        </ion-card>

        <!-- Empty State -->
        <div *ngIf="recentSleeps.length === 0" class="empty-state">
            <ion-icon name="bed-outline"></ion-icon>
            <h3>No Sleep Logs Yet</h3>
            <p>Start by logging your overnight sleep!</p>
        </div>
    </div>
</ion-content>